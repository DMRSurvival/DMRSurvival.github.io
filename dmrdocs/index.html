<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Boxicons CSS -->
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <title>DMR Survival Documents</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class=dark>
    <!-- navbar -->
    <nav class="navbar">
      <div class="logo_item">
        <i class="bx bx-menu" id="sidebarOpen"></i>
        <img src="images/logo.png" alt=""></i>Dark Mountain Research
      </div>

      <div class="search_bar">
        <input type="text" placeholder="Search" />
      </div>

      <div class="navbar_content">
        <i class="bi bi-grid"></i>
        <i class='bx bx-sun' id="darkLight"></i>
      </div>
    </nav>

    <!-- sidebar -->
<div id="sidebar-container"></div>

    <script>
      // Function to load the sidebar
      function loadSidebar() {
        fetch('sidebar.html')
          .then(response => response.text())
          .then(data => {
            document.getElementById('sidebar-container').innerHTML = data;
            initializeSidebarFunctions(); // Initialize functions after loading sidebar
          })
          .catch(error => console.error('Error loading sidebar:', error));
      }

      // Function to initialize sidebar functions
      function initializeSidebarFunctions() {
        const body = document.querySelector("body");
        const darkLight = document.querySelector("#darkLight");
        const sidebar = document.querySelector(".sidebar");
        const submenuItems = document.querySelectorAll(".submenu_item");
        const sidebarOpen = document.querySelector("#sidebarOpen");
        const sidebarClose = document.querySelector(".collapse_sidebar");
        const sidebarExpand = document.querySelector(".expand_sidebar");

        // Handle sidebar toggle
        sidebarOpen.addEventListener("click", () => sidebar.classList.toggle("close"));

        sidebarClose.addEventListener("click", () => {
          sidebar.classList.add("close", "hoverable");
        });
        sidebarExpand.addEventListener("click", () => {
          sidebar.classList.remove("close", "hoverable");
        });

        sidebar.addEventListener("mouseenter", () => {
          if (sidebar.classList.contains("hoverable")) {
            sidebar.classList.remove("close");
          }
        });
        sidebar.addEventListener("mouseleave", () => {
          if (sidebar.classList.contains("hoverable")) {
            sidebar.classList.add("close");
          }
        });

        // Handle dark/light mode toggle
        darkLight.addEventListener("click", () => {
          body.classList.toggle("dark");
          if (body.classList.contains("dark")) {
            darkLight.classList.replace("bx-moon", "bx-sun");
          } else {
            darkLight.classList.replace("bx-sun", "bx-moon");
          }
        });

        // Set the initial state of the dark/light icon based on the body class
        document.addEventListener("DOMContentLoaded", () => {
          if (body.classList.contains("dark")) {
            darkLight.classList.replace("bx-moon", "bx-sun");
          } else {
            darkLight.classList.replace("bx-sun", "bx-moon");
          }
        });

        // Handle submenu toggle
        submenuItems.forEach((item, index) => {
          item.addEventListener("click", () => {
            item.classList.toggle("show_submenu");
            submenuItems.forEach((item2, index2) => {
              if (index !== index2) {
                item2.classList.remove("show_submenu");
              }
            });
          });
        });
      }

      // Load the sidebar when the page loads
      window.onload = loadSidebar;
    </script>

    <!-- Main Content -->
    <div class="main-content">
      <h1>Welcome to My Website</h1>
      <p>This is the main content area. Add your content here.</p>
      <a href="#">Learn more</a>
    </div>

    <!-- JavaScript -->
    <script src="script.js"></script>
  </body>
</html>
